# Multi-stage Dockerfile for Labour Marketplace Backend\n\n# Stage 1: Build\nFROM node:18-alpine AS builder\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci\nCOPY . .\nRUN npm run build\n\n# Stage 2: Runtime\nFROM node:18-alpine\nWORKDIR /app\nENV NODE_ENV=production\n\n# Install dumb-init for proper signal handling\nRUN apk add --no-cache dumb-init\n\n# Copy built application from builder\nCOPY --from=builder /app/dist ./dist\nCOPY --from=builder /app/node_modules ./node_modules\nCOPY --from=builder /app/package*.json ./\n\nEXPOSE 3000\n\n# Use dumb-init as PID 1\nENTRYPOINT [\"dumb-init\", \"--\"]\nCMD [\"npm\", \"start\"]
